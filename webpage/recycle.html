<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CAT工具</title>
    <meta name="description" content="Source code generated using layoutit.com">
    <meta name="author" content="LayoutIt!">
    <link href="../resource/bootstrap/css/bootstrap.css" rel="stylesheet">
    <link href="../resource/bootstrap/css/style.css" rel="stylesheet">
    <!-- The jQuery library is a prerequisite for all jqSuite products -->
      <script type="text/javascript" src="../resource/jqgrid/js/jquery.min.js"></script>
      <!-- We support more than 30 localizations -->
      <script type="text/javascript" src="../resource/jqgrid/js/grid.locale-en.js"></script>
      <!-- This is the Javascript file of jqGrid -->
      <script type="text/javascript" src="../resource/jqgrid/js/jquery.jqGrid.min.js"></script>
      <!-- A link to a Boostrap  and jqGrid Bootstrap CSS siles-->
      <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
      <link rel="stylesheet" type="text/css" media="screen" href="jqgrid/css/ui.jqgrid-bootstrap.css" />-->
    <script>
      $.jgrid.defaults.width = 780;
      $.jgrid.defaults.responsive = true;
      $.jgrid.defaults.styleUI = 'Bootstrap';
    </script>

    <style type="text/css">
      button {background: transparent; border: none;}
      button:hover {background-color:#f8f8f8}
    </style>
  </head>
  <body>
    <div class="container-fluid">
	<div class="row">
		<div class="col-md-12">
      <div class="row border-bottom">
				<div class="col-md-12">
          <nav class="navbar navbar-default" role="navigation">
  					<ul class="nav nav-pills">
  						<li class="nav-item">
  							<a class="nav-link active" href="../index.html">主页</a>
  						</li>
  						<li class="nav-item">
  							<a class="nav-link" href="project.html">项目</a>
  						</li>
  						<li class="nav-item">
  							<a class="nav-link" href="termbase.html">术语库</a>
  						</li>
  						<li class="nav-item">
  							<a class="nav-link" href="translation-memory.html">翻译记忆库</a>
  						</li>
              <li class="nav-item dropdown ml-md-auto">
                 <a class="nav-link dropdown-toggle" href="http://example.com" id="navbarDropdownMenuLink" data-toggle="dropdown">登录</a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                   <a class="dropdown-item" href="login_pm.html">项目经理</a> <a class="dropdown-item" href="login.html">普通译员</a>
                  <div class="dropdown-divider">
                  </div> <a class="dropdown-item" href="register.html">注册</a>
                </div>
              </li>
  					</ul>
          </nav>
				</div>
			</div>
			<div class="row">
				<div class="col-md-2 border">
          <h3 class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted border-bottom">
          <span>资源</span>
          </h3>
					<ul class="nav flex-column border-bottom">
						<li class="nav-item">
							<a class="nav-link" href="project.html">项目</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="translation-memory.html">翻译记忆库</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="termbase.html">术语库</a>
						</li>
            <li class="nav-item">
							<a class="nav-link disabled" href="#">回收站</a>
						</li>
					</ul>
				</div>
				<div class="col-md-10 border">
          <nav class="navbar">
            <ul class="nav nav-pills">
              <li>
                <div class="btn-group btn-group-lg boreder" role="group">
      						<button class="btn btn-secondary" type="button" id="restore">
                    恢复选中
      						</button>
      						<button class="btn btn-secondary" type="button" id="del">
      							删除选中
      						</button>
                </div>
                <div class="btn-group btn-group-lg boreder" role="group">
      						<button class="btn btn-secondary" type="button" id="pro">
                    项目
      						</button>
      						<button class="btn btn-secondary" type="button" id="tm">
      							TM
      						</button>
                  <button class="btn btn-secondary" type="button" id="term">
                    TB
                  </button>
                  <button class="btn btn-secondary" type="button" id="all">
      							全部
      						</button>
                </div>
              </li>
              
          </ul>
        </nav>
        <div class="col-md-10"> <!--句段窗口-->
          <div >
              <table id="jqGrid" ></table>
              <div id="jqGridPager"></div>
          </div>
              <script type="text/javascript" id="seg">
                  $("#all").click(function(){ //全部
                    $('#jqGrid').jqGrid('clearGridData');
                    $("#jqGrid").setGridParam( 
                        {
                        url:'../include/search0.php?type=7&option=all',
                        }
                    ).trigger("reloadGrid");
                  });

                  $("#pro").click(function(){ //项目
                    $('#jqGrid').jqGrid('clearGridData');
                    $("#jqGrid").setGridParam( 
                        {
                        url:'../include/search0.php?type=7&option=project',
                        }
                    );
                    $("#jqGrid").trigger("reloadGrid");
                  });

                  $("#term").click(function(){ //术语
                    $('#jqGrid').jqGrid('clearGridData');
                    $("#jqGrid").setGridParam( 
                        {
                        url:'../include/search0.php?type=7&option=term',
                        }
                    ).trigger("reloadGrid");
                  });

                  $("#tm").click(function(){ //tm
                    $('#jqGrid').jqGrid('clearGridData');
                    $("#jqGrid").setGridParam( 
                        {
                        url:'../include/search0.php?type=7&option=tm',
                        }
                    ).trigger("reloadGrid");
                  });

                  $(document).ready(function () {
                      $("#jqGrid").jqGrid({
                          url: '../include/search0.php?type=7&option=all',
                          editurl: 'clientArray',
                          datatype: "json",
                          colModel: [
                              {
                      label: "ID",
                                  name: 'deleted_ID',
                                  width: 75
                              },
                              {
                      label: "文件名",
                                  name: 'del_name',
                                  width: 100,
                                   // must set editable to true if you want to make the field editable
                              },
                              {
                      label: "文件类型",
                                  name: 'type',
                                  width: 100,
                                   // must set editable to true if you want to make the field editable
                              },
                              
                          ],
                  sortname: 'type',
                          onSelectRow: editRow, // the javascript function to call on row click. will ues to to put the row in edit mode
                          width: 1000,
                          height: 550,
                      });
                      var lastSelection;
                      function editRow(id) {
                          if (id && id !== lastSelection) {
                              var grid = $("#jqGrid");
                              grid.jqGrid('restoreRow',lastSelection);
                              grid.jqGrid('editRow',id, {keys: true} );
                              lastSelection = id;
                          }
                      }
                      jQuery("#restore").click(function(){
                            var s;
                            i = $("#jqGrid").jqGrid('getGridParam', 'selrow');
                            id = jQuery("#jqGrid").getCell(i,"deleted_ID");
                            name=jQuery("#jqGrid").getCell(i,"del_name");
                            t=jQuery("#jqGrid").getCell(i,"type");
                            if (i) {
                                var r = confirm("您确定要恢复该内容吗？");
                                if (r == true) {
                                  $("#jqGrid").jqGrid("delRowData", i[0]);
                                    $.post(
                                        '../include/cat/recycle/recycle.php?action=re',
                                        {id:id,name:name,type:t},
                                    )
                                } else {
                                    console.log("pass");
                                }
                                
                            }
                            else {
                                alert("您未选中内容");
                            }
                        });
                        jQuery("#del").click(function(){
                            var s;
                            i = $("#jqGrid").jqGrid('getGridParam', 'selrow');
                            id = jQuery("#jqGrid").getCell(i,"deleted_ID");
                            name=jQuery("#jqGrid").getCell(i,"del_name");
                            t=jQuery("#jqGrid").getCell(i,"type");
                            if (i) {
                                var r = confirm("您确定要彻底删除该内容吗？");
                                if (r == true) {
                                  $("#jqGrid").jqGrid("delRowData", i[0]);
                                    $.post(
                                        '../include/cat/recycle/recycle.php?action=del',
                                        {id:id,name:name,type:t},
                                    )
                                } else {
                                    console.log("pass");
                                }
                                
                            }
                            else {
                                alert("您未选中内容");
                            }
                        });
                  });
              </script>
        </div>
          <nav class="pagination-sm">
    				<ul class="pagination">
    					<li class="page-item">
    						<a class="page-link" href="#">Previous</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">1</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">2</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">3</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">4</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">5</a>
    					</li>
    					<li class="page-item">
    						<a class="page-link" href="#">Next</a>
    					</li>
    				</ul>
    			</nav>
				</div>
			</div>
		</div>
	</div>
</div>
    <script src="../resource/bootstrap/js/bootstrap.min.js"></script>
    <script src="../resource/bootstrap/js/scripts.js"></script>
  </body>
</html>
